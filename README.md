# 🤖 ИИ-Трейдинг Бот

Самообучающийся трейдинг-бот на основе Reinforcement Learning для торговли криптовалютой на Binance Futures.

## 🎯 Цель проекта
Создать самообучающийся трейдинг-бот на основе Reinforcement Learning для торговли криптовалютой на Binance Futures.

## 🏗️ Архитектура
- **Python**: обучение RL модели (мозг бота)
- **Node.js**: боевой бот, исполнение ордеров, API, UI
- **Интеграция**: ONNX формат для обмена моделью

## 🚀 Быстрый старт

### Требования
- Python 3.8+
- Node.js 16+
- Docker & Docker Compose
- PostgreSQL 13+

### Запуск
```bash
# 1. Клонировать проект
git clone <repository-url>
cd trading-agent

# 2. Запустить PostgreSQL
docker-compose up -d postgres

# 3. Обучить модель (Python)
cd python
pip install -r requirements.txt
python src/models/trainer.py

# 4. Запустить бота (Node.js)
cd ../nodejs
npm install
npm run dev
```

## 📁 Структура проекта

```
trading-agent/
├── README.md
├── TODO.md
├── docker-compose.yml
├── .env.example
├── .gitignore
│
├── python/                    # 🐍 Python часть (обучение модели)
│   ├── requirements.txt
│   ├── src/
│   │   ├── data/
│   │   │   ├── collector.py      # Сбор данных с Binance
│   │   │   ├── preprocessor.py   # Подготовка данных
│   │   │   └── storage.py        # Хранение данных
│   │   ├── environment/
│   │   │   ├── trading_env.py    # RL среда для трейдинга
│   │   │   └── gym_wrapper.py    # Обёртка для Gym
│   │   ├── models/
│   │   │   ├── sac_model.py      # SAC модель
│   │   │   └── trainer.py        # Обучение модели
│   │   └── utils/
│   │       ├── config.py         # Конфигурация
│   │       └── metrics.py        # Метрики обучения
│   ├── notebooks/                # Jupyter notebooks для экспериментов
│   ├── data/                     # Исторические данные
│   ├── models/                   # Обученные модели
│   └── logs/                     # Логи обучения
│
├── nodejs/                      # 🟢 Node.js часть (боевой бот)
│   ├── package.json
│   ├── src/
│   │   ├── bot/
│   │   │   ├── trading_bot.js   # Основной бот
│   │   │   ├── risk_manager.js  # Управление рисками
│   │   │   └── order_manager.js # Управление ордерами
│   │   ├── ai/
│   │   │   ├── model_loader.js  # Загрузка ONNX модели
│   │   │   └── predictor.js     # Предсказания
│   │   ├── exchange/
│   │   │   ├── binance_client.js # API Binance
│   │   │   └── ccxt_wrapper.js   # Обёртка CCXT
│   │   ├── api/
│   │   │   ├── server.js        # Express сервер
│   │   │   └── routes/          # API маршруты
│   │   ├── ui/                  # Веб-интерфейс
│   │   │   ├── components/      # React компоненты
│   │   │   └── pages/           # Страницы
│   │   └── utils/
│   │       ├── config.js        # Конфигурация
│   │       ├── logger.js        # Логирование
│   │       └── database.js      # База данных
│   ├── public/                  # Статические файлы
│   └── logs/                    # Логи бота
│
├── shared/                      # 🔄 Общие файлы
│   ├── config/                  # Общие конфигурации
│   ├── types/                   # TypeScript типы
│   └── utils/                   # Общие утилиты
│
└── docs/                        # 📚 Документация
    ├── api.md                   # API документация
    ├── deployment.md            # Инструкции по развёртыванию
    └── troubleshooting.md       # Решение проблем
```

## 🔄 Взаимодействие компонентов

### Python → Node.js
1. **Обучение**: Python обучает SAC модель
2. **Экспорт**: Модель сохраняется в ONNX формат
3. **Передача**: ONNX файл копируется в Node.js папку

### Node.js (боевой бот)
1. **Загрузка**: Загружает ONNX модель через onnxruntime
2. **Данные**: Получает свежие данные с Binance
3. **Предсказание**: Кормит данные в модель
4. **Действие**: Исполняет торговые решения

## 📊 Поток данных
```
Binance API → Python (обучение) → ONNX модель → Node.js (бот) → Binance API
     ↑                                                              ↓
     └─────────────── UI (мониторинг) ←───────────────┘
```

## 🔧 Конфигурация
- **Python**: `.env` файл с API ключами и параметрами
- **Node.js**: `config.js` с настройками бота
- **Общие**: `shared/config/` для общих параметров

## 📋 Этапы разработки

### Этап 1: Базовая инфраструктура ✅
- [x] Структура проекта (Python + Node.js)
- [x] Сбор исторических данных Binance Futures (2020-2024)
- [x] Создание RL среды для трейдинга
- [x] Базовая SAC модель

### Этап 2: Обучение и тестирование ✅
- [x] Обучение модели на исторических данных
- [x] Backtesting и валидация
- [x] Экспорт модели в ONNX
- [x] Базовый Node.js бот

### Этап 3: Интеграция и UI ✅
- [x] Подключение Node.js к Binance Futures
- [x] Интеграция обученной модели
- [x] Простой веб-интерфейс
- [x] Paper trading

### Этап 4: Продакшн 🚧
- [ ] Risk management
- [ ] Мониторинг и алерты
- [ ] Реальные деньги (с ограничениями)
- [ ] Автоматическое переобучение

## 🛠️ Технологии
- **Python**: Stable-Baselines3, PyTorch, pandas, numpy
- **Node.js**: Express, ccxt, onnxruntime, React
- **Биржа**: Binance Futures API
- **Модель**: SAC (Soft Actor-Critic) для RL

## 🎯 MVP функции
- ✅ RL модель (SAC) для принятия решений
- ✅ Подключение к Binance Futures
- ✅ Простой веб-интерфейс
- ✅ Хранение сделок в PostgreSQL
- ✅ Paper trading режим

## 📊 Мониторинг
- Веб-интерфейс: http://localhost:3000
- API: http://localhost:3000/api
- База данных: localhost:5432

## ⚠️ Риски и ограничения
- Максимальный риск на сделку: настраивается пользователем
- Дневные лимиты убытков
- Автоматическая остановка при критических ошибках
- Только фьючерсы (без спота)

## 🚀 Приоритеты разработки
**Приоритет**: получить работающий прототип за 2-3 недели, затем постепенно улучшать.

### Текущие задачи
1. **Стабилизация** - Устранение багов, улучшение надежности
2. **Тестирование** - Backtesting на исторических данных
3. **Risk Management** - Защита от больших убытков
4. **Мониторинг** - Система наблюдения за ботом
5. **Paper Trading** - Тестирование без реальных денег

## 🔧 Конфигурация
Скопируйте `.env.example` в `.env` и настройте параметры.

---

**⚠️ Дисклеймер**: Этот проект предназначен только для образовательных целей. Криптовалютная торговля связана с высокими рисками. Авторы не несут ответственности за финансовые потери.

**🚀 Удачи в торговле!**
